<div class="container">
  <div class="row my-4 justify-content-center">
    <%= search_form_for @q, url: search_posts_path do |f| %>
      <%= f.search_field :name_or_body_cont %>
      <%= f.select :prefecture_code_eq, options_from_collection_for_select(JpPrefecture::Prefecture.all, :name, :name), prompt: "地域選択" %>
      <%= f.submit :"検索" %>
    <% end %>
  </div>
  <div class="row">
    <div class="col-md-auto mx-auto">
      <div class="list-group list-group-flush mt-3">
          <button type="button" class="list-group-item-active list-group-item-secondary disabled">ジャンル別</button>
        <% @genres.each do |genre| %>
          <button type="button" class="list-group-item-action btn shadow"><%= link_to genre.name, posts_path(id: genre) %></button>
        <% end %>
      </div>
    </div>
    <div class="col-md-9">
      <table class="table table-light table-hover mt-3">
        <tbody>
          <% @posts.each do |post| %>
            <tr class="post-link">
              <td>
                <%= link_to post_path(post) do %>
                <%= attachment_image_tag post, :image, format: 'jpeg', size: "130x130" %>
                <% end %>
              </td>
              <td>
                <p><strong><%= post.name %></strong></p>
                <p><%= post.genre.name %></p>
                <p><%= post.price.to_s(:delimited) %>円</p>
              </td>
              <td id="post_<%= post.id %>">
                <p>投稿日<%= l post.created_at, format: :middle %></p>
                <p>更新日<%= l post.updated_at, format: :middle %></p>
                <div class="favorite"><%= render "public/favorites/favorite", post: post %></div>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
    <div class="row">
      <div class="center-block mx-auto"><br><br>
        <%= paginate @posts %>
      </div>
    </div>
</div>